var redrawTimer = null,
    windowWidth;

getScreenWidth();


function getScreenWidth() {
    var width = $(window).outerWidth();
    windowWidth = width;
    if (width <= 700) {
        window.device = 0; // smartphone
    } else if (width <= 768) {
        window.device = 1; // tablet portrait
    } else if (width <= 1024) {
        window.device = 2; // tablet landscape
    } else {
        window.device = 3; // desktop
    }
}



$(window).ready(function(){
    var container = document.getElementById('infographic');
    window.app = new App(container);
});

var paths = [{
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 17,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M106.825,91.052 c-2.959-4.175-7.829-6.9-13.336-6.898c-9.023,0-16.336,7.314-16.336,16.336c0,9.022,7.313,16.336,16.336,16.336 c9.023,0,16.336-7.315,16.336-16.336C109.825,96.973,108.714,93.717,106.825,91.052'
}, {
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 17,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M81.548,83.019 c-5.566,3.811-9.217,10.214-9.217,17.47c0,11.685,9.474,21.158,21.158,21.158c11.684,0,21.157-9.473,21.157-21.158 c0-11.685-9.472-21.158-21.157-21.158C89.059,79.331,84.946,80.692,81.548,83.019'
}, {
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 18,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M114.782,85.6 c-4.698-6.706-12.483-11.092-21.293-11.092c-14.348,0-25.979,11.633-25.979,25.98c0,14.347,11.631,25.98,25.979,25.98 c14.348,0,25.979-11.632,25.979-25.98C119.469,94.95,117.735,89.816,114.782,85.6'
}, {
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 16,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M65.104,88.508 c-1.557,3.682-2.417,7.731-2.417,11.98c0,17.012,13.791,30.804,30.802,30.804c17.011,0,30.802-13.791,30.802-30.803 c0-17.012-13.791-30.802-30.802-30.802C80.728,69.687,69.778,77.448,65.104,88.508'
}, {
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 20,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M125.079,84.007 c-5.948-11.377-17.862-19.143-31.59-19.143c-19.675,0-35.624,15.949-35.624,35.624c0,19.675,15.949,35.624,35.624,35.624 c19.675,0,35.624-15.949,35.624-35.624C129.113,94.542,127.656,88.936,125.079,84.007'
}, {
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 21,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M57.064,82.883 c-2.577,5.322-4.022,11.295-4.022,17.605c0,22.338,18.109,40.446,40.446,40.446c22.338,0,40.446-18.108,40.446-40.446 c0-22.338-18.108-40.446-40.446-40.446C77.461,60.042,63.611,69.364,57.064,82.883'
}, {
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 17,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M127.956,71.141 c-8.304-9.743-20.664-15.92-34.467-15.921c-25.001,0-45.269,20.267-45.269,45.268c0,25.001,20.268,45.27,45.269,45.27 c25.001,0,45.269-20.268,45.269-45.269C138.758,89.291,134.692,79.043,127.956,71.141'
}, {
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 18,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M46.463,83.195 c-1.983,5.39-3.065,11.215-3.066,17.293c0,27.664,22.428,50.09,50.091,50.09c27.663,0,50.091-22.426,50.091-50.09 c0-27.664-22.428-50.09-50.091-50.09C71.903,50.398,53.505,64.052,46.463,83.195'
}, {
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 20,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M141.744,74.259 c-9.308-17.087-27.428-28.683-48.255-28.683c-30.327,0-54.912,24.585-54.912,54.912c0,30.327,24.585,54.912,54.912,54.912 c30.327,0,54.912-24.585,54.912-54.912C148.401,90.989,145.989,82.052,141.744,74.259'
}, {
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 18,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M66.84,47.014 c-19.615,9.793-33.086,30.06-33.085,53.474c0,32.99,26.744,59.734,59.734,59.734c32.99,0,59.734-26.744,59.734-59.734 c0-32.99-26.744-59.734-59.734-59.734C83.912,40.754,74.862,43.008,66.84,47.014'
}, {
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 17,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M129.582,46.956 c-10.303-6.96-22.724-11.025-36.094-11.025c-35.654,0-64.557,28.903-64.557,64.557c0,35.654,28.903,64.557,64.557,64.557 c35.654,0,64.556-28.904,64.556-64.557C158.044,78.205,146.754,58.558,129.582,46.956'
}, {
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 19,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M35.536,62.33 C28.313,73.277,24.11,86.392,24.11,100.488c0,38.317,31.062,69.379,69.379,69.379c38.317,0,69.379-31.062,69.379-69.379 c0-38.317-31.063-69.379-69.379-69.379C69.269,31.109,47.947,43.52,35.536,62.33'
}, {
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 18,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M148.66,50.871 c-13.582-15.093-33.268-24.584-55.171-24.584c-40.979,0-74.2,33.222-74.2,74.201s33.221,74.201,74.2,74.201 s74.2-33.222,74.2-74.201C167.689,81.412,160.49,64.017,148.66,50.871'
}, {
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 21,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M32.51,50.222 c-11.273,13.66-18.044,31.173-18.043,50.266c0,43.642,35.38,79.022,79.022,79.022c43.642,0,79.022-35.38,79.022-79.022 c0-43.642-35.379-79.023-79.022-79.023C68.939,21.465,47.005,32.66,32.51,50.222'
}, {
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 20,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M146.822,35.79 c-14.494-11.961-33.075-19.146-53.333-19.146c-46.306,0-83.845,37.538-83.845,83.844c0,46.306,37.539,83.845,83.845,83.845 c46.306,0,83.845-37.539,83.845-83.845C177.334,74.441,165.456,51.168,146.822,35.79'
}, {
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 18,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M38.662,30.8 c-20.608,16.236-33.84,41.417-33.84,69.688c0,48.969,39.698,88.667,88.667,88.667c48.969,0,88.667-39.698,88.667-88.667 c0-48.969-39.698-88.666-88.667-88.666C72.791,11.822,53.75,18.914,38.662,30.8'
}, {
    name: 'raw',
    type: 'regular',
    sidestreams: [0,1,2,3,4,5,6],
    dash: 16,
    gap: 4,
    animationStart: 0,
    cover: false,
    points: 'M136.663,17.545 C123.748,10.809,109.063,7,93.489,7C41.857,7,0,48.856,0,100.488c0,51.632,41.857,93.488,93.489,93.488 c51.632,0,93.489-41.856,93.489-93.488C186.978,64.431,166.564,33.141,136.663,17.545'
}];

var sidestreams = [
    {
        name: 'Coarse rejects',
        color: '#928371'
    }, {
        name: 'Fine rejects',
        color: '#C48F65'
    }, {
        name: 'Deinking sludge',
        color: '#B5AB9F'
    }, {
        name: 'Process water',
        color: '#95C4E0'
    }, {
        name: 'Primary sludge',
        color: '#72B0B0'
    }, {
        name: 'Secondary sludge',
        color: '#B0D6B1'
    }
];

var outstreams = [
    {
        color: '#D6D6D6'
    }
];