function App(container) {
    this.container = container;
    this.settings = new Settings(this);
    this.canvases = [];
    this.paths = [];
    this.canvas = null;
}

App.prototype.init = function() {
    this.canvas = new Canvas(this);
    // sidestreams
    this.paths.push( new Path( 'sidestream-1-A', [0], this, 20, 4, 'M0,435 0,635') );
    this.paths.push( new Path( 'sidestream-1-A', [0], this, 18, 4, 'M4,452 4,635') );
    this.paths.push( new Path( 'sidestream-1-A', [1], this, 17, 4, 'M100,442 100,635') );
    this.paths.push( new Path( 'sidestream-1-A', [1], this, 18, 4, 'M104,452 104,635') );
    this.paths.push( new Path( 'sidestream-1-A', [2], this, 19, 4, 'M200,435 200,635') );
    this.paths.push( new Path( 'sidestream-1-A', [2], this, 16, 4, 'M204,452 204,635') );
    this.paths.push( new Path( 'sidestream-1-A', [3], this, 20, 4, 'M300,442 300,635') );
    this.paths.push( new Path( 'sidestream-1-A', [3], this, 18, 4, 'M304,452 304,635') );
    this.paths.push( new Path( 'sidestream-1-A', [4], this, 19, 4, 'M400,435 400,635') );
    this.paths.push( new Path( 'sidestream-1-A', [4], this, 20, 4, 'M404,452 404,635') );
    this.paths.push( new Path( 'sidestream-1-A', [5], this, 16, 4, 'M500,442 500,635') );
    this.paths.push( new Path( 'sidestream-1-A', [5], this, 18, 4, 'M504,452 504,635') );
    // pipeline
    this.paths.push(
        new Path(
            'pipeline-A',
            [0,1,2,3,4,5],
            this,
            20,
            4,
            'M0,0v435c0,19.299,15.701,35,35,35s35-15.701,35-35 V305c0-8.271,6.729-15,15-15s15,6.729,15,15v130c0,19.299,15.701,35,35,35s35-15.701,35-35V325c0-8.271,6.729-15,15-15 s15,6.729,15,15v110c0,19.299,15.701,35,35,35s35-15.701,35-35v-90c0-8.271,6.729-15,15-15s15,6.729,15,15v90 c0,19.299,15.701,35,35,35s35-15.701,35-35v-65c0-8.271,6.729-15,15-15s15,6.729,15,15v65c0,19.299,15.701,35,35,35s35-15.701,35-35 v-50c0-8.271,6.729-15,15-15s15,6.729,15,15v50c0,19.299,15.701,35,35,35h165'
        )
    );
    this.paths.push(
        new Path(
            'pipeline-B',
            [0,1,2,3,4,5],
            this,
            18,
            4,
            'M4,0v435c0,17.093,13.906,31,31,31 c17.094,0,31-13.907,31-31V305c0-10.477,8.523-19,19-19s19,8.523,19,19v130c0,17.093,13.906,31,31,31c17.094,0,31-13.907,31-31V325 c0-10.477,8.523-19,19-19s19,8.523,19,19v110c0,17.093,13.907,31,31,31s31-13.907,31-31v-90c0-10.477,8.523-19,19-19s19,8.523,19,19 v90c0,17.093,13.907,31,31,31s31-13.907,31-31v-65c0-10.477,8.523-19,19-19s19,8.523,19,19v65c0,17.093,13.907,31,31,31 s31-13.907,31-31v-50c0-10.477,8.523-19,19-19s19,8.523,19,19v50c0,17.093,13.907,31,31,31h165'
        )
    );
    this.paths.push(
        new Path(
            'pipeline-C',
            [0,1,2,3,4,5],
            this,
            19,
            4,
            'M8,0v435c0,14.888,12.112,27,27,27s27-12.112,27-27 V305c0-12.682,10.318-23,23-23s23,10.318,23,23v130c0,14.888,12.112,27,27,27s27-12.112,27-27V325c0-12.682,10.318-23,23-23 s23,10.318,23,23v110c0,14.888,12.112,27,27,27s27-12.112,27-27v-90c0-12.682,10.318-23,23-23s23,10.318,23,23v90 c0,14.888,12.112,27,27,27s27-12.112,27-27v-65c0-12.682,10.318-23,23-23s23,10.318,23,23v65c0,14.888,12.112,27,27,27 s27-12.112,27-27v-50c0-12.682,10.318-23,23-23s23,10.318,23,23v50c0,14.888,12.112,27,27,27h165'
        )
    );
    this.paths.push(
        new Path(
            'pipeline-D',
            [0,1,2,3,4,5],
            this,
            16,
            4,
            'M12,0v435c0,12.682,10.318,23,23,23s23-10.318,23-23 V305c0-14.888,12.112-27,27-27s27,12.112,27,27v130c0,12.682,10.318,23,23,23s23-10.318,23-23V325c0-14.888,12.112-27,27-27 s27,12.112,27,27v110c0,12.682,10.318,23,23,23s23-10.318,23-23v-90c0-14.888,12.112-27,27-27s27,12.112,27,27v90 c0,12.682,10.318,23,23,23s23-10.318,23-23v-65c0-14.888,12.112-27,27-27s27,12.112,27,27v65c0,12.682,10.318,23,23,23 s23-10.318,23-23v-50c0-14.888,12.112-27,27-27s27,12.112,27,27v50c0,12.682,10.318,23,23,23h165'
        )
    );
    this.paths.push(
        new Path(
            'pipeline-E',
            [0,1,2,3,4,5],
            this,
            17,
            4,
            'M16,0v435c0,10.477,8.523,19,19,19s19-8.523,19-19 V305c0-17.093,13.906-31,31-31c17.094,0,31,13.907,31,31v130c0,10.477,8.523,19,19,19s19-8.523,19-19V325c0-17.093,13.906-31,31-31 s31,13.907,31,31v110c0,10.477,8.523,19,19,19s19-8.523,19-19v-90c0-17.093,13.907-31,31-31s31,13.907,31,31v90 c0,10.477,8.523,19,19,19s19-8.523,19-19v-65c0-17.093,13.907-31,31-31s31,13.907,31,31v65c0,10.477,8.523,19,19,19s19-8.523,19-19 v-50c0-17.093,13.907-31,31-31s31,13.907,31,31v50c0,10.477,8.523,19,19,19h165'
        )
    );
    this.paths.push(
        new Path(
            'pipeline-F',
            [0,1,2,3,4,5],
            this,
            15,
            4,
            'M20,0v435c0,8.271,6.729,15,15,15s15-6.729,15-15 V305c0-19.299,15.701-35,35-35s35,15.701,35,35v130c0,8.271,6.729,15,15,15s15-6.729,15-15V325c0-19.299,15.701-35,35-35 s35,15.701,35,35v110c0,8.271,6.729,15,15,15s15-6.729,15-15v-90c0-19.299,15.701-35,35-35s35,15.701,35,35v90 c0,8.271,6.729,15,15,15s15-6.729,15-15v-65c0-19.299,15.701-35,35-35s35,15.701,35,35v65c0,8.271,6.729,15,15,15s15-6.729,15-15 v-50c0-19.299,15.701-35,35-35s35,15.701,35,35v50c0,8.271,6.729,15,15,15h165'
        )
    );
    this.loaded();
};

App.prototype.loaded = function() {
    $(this.container).addClass('loaded');
};

App.prototype.scroll = function(frame) {
    this.canvas.scroll(frame);
    for (var i = 0, l = this.paths.length; i < l; i++) {
        var path = this.paths[i];
        path.scroll(frame);
    }
};

App.prototype.setStage = function(x, y) {
    this.settings.stage.x = x;
    this.settings.stage.y = y;
};



